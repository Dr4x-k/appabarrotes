<%- include('partials/_header') -%> 
                <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                    <div class="chartjs-size-monitor">
                        <div class="chartjs-size-monitor-expand">
                            <div class></div>
                        </div>
                        <div class="chartjs-size-monitor-shrink">
                            <div class></div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Empleados</h1>
                    </div>
                    <div class="table-responsive bg-light">
                        <table id="" class="table table-striped table-sm">
                            <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Apellido Paterno</th>
                                    <th scope="col">Apellido Materno</th>
                                    <th scope="col">usuario</th>
                                    <th scope="col">Tipo</th>
                                    <th scope="col">Controles</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% if (data) { %> 
                                    <% for (var i = 0; i < data.length; i++) { %> 
                                    <tr>
                                        <td><%= data[i].idUsuario %></td>
                                        <td><%= data[i].nombres %></td>
                                        <td><%= data[i].apellidoPaterno %></td>
                                        <td><%= data[i].apellidoMaterno %></td>
                                        <td><%= data[i].usuario %></td>
                                        <td><%= data[i].rol %></td>
                                        <td>
                                            <a href="update/<%= data[i].idUsuario %>" class="btn btn-primary">Editar</a>
                                            <!-- <a href="delete/<%= data[i].idUsuario %>" onclick="return confirm('Esta seguro de eliminar el empleado?')" class="btn btn-danger">Borrar</a> -->
                                            <a onclick="confirmation(<%= data[i].idUsuario %>);" class="btn btn-danger">Borrar</a>
                                        </td>
                                    </tr>
                                    <% } %>
                                <% }; %> 
                            </tbody>
                        </table>
                    </div>

                    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>  
                    <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
                    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
                    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap5.min.js"></script>        
                    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script> -->

                    <!-- <table id="empleados" class="table table-striped table-sm">
                        <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Apellido Paterno</th>
                                <th scope="col">Apellido Materno</th>
                                <th scope="col">usuario</th>
                                <th scope="col">Tipo</th>
                                <th scope="col">Controles</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                    <script>
                        $('#empleados').DataTable({
                            ajax: {
                                url: "/data",
                                dataSrc: "data"
                            },
                            columns: [
                                {"nombres": "idUsuario"},
                                {"data": "nombres"},
                                {"data": "apellidoPaterno"},
                                {"data": "apellidoMaterno"},
                                {"data": "usuario"}
                            ],
                            pageLength : 5,
                            lengthMenu: [[5, 10, 20, -1], [5, 10, 20, 'Todos']]
                        });
                    </script> -->
                </main>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.17/dist/sweetalert2.all.min.js"></script>
        <script>
            function confirmation(idUsuario) {
                const swalWithBootstrapButtons = Swal.mixin({
                customClass: {
                    confirmButton: 'btn btn-success upd',
                    cancelButton: 'btn btn-danger upd'
                },
                buttonsStyling: false
                })

                swalWithBootstrapButtons.fire({
                title: '¿Borrar al empleado ' + idUsuario + '?',
                text: "¡Estos cambios no se pueden revertir!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Borrar',
                cancelButtonText: 'Cancelar',
                reverseButtons: true
                }).then((result) => {
                if (result.isConfirmed) {
                    swalWithBootstrapButtons.fire(
                    'Empleado eliminado!',
                    'El usuario a sido eliminado.',
                    'success',
                    )
                    windows.location = '/delete/' + idUsuario;
                } else if (
                    /* Read more about handling dismissals below */
                    result.dismiss === Swal.DismissReason.cancel
                ) {
                    swalWithBootstrapButtons.fire(
                    'Cancelado',
                    'Tú lista de empleados no ha sido actualizada',
                    'error'
                    )
                }
                })
            }
        </script>
    </body>
</html>